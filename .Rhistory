table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
print(n = 300)
use_see
ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
print(n = 300)
ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
print(n = 300)
ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, "")) |>
print(n = 300)
ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, ""),
instruction = "see") |>
print(n = 300)
use_see
ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1)) |>
# filter(elemid %in% c(as.character(1410:1430))) |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, ""),
instruction = if_else(is.na(codes), "see", "see:code")) |>
print(n = 300)
ind2 <- ind |>
filter(!is.na(term_level)) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(code = lead(code),
row = lead(codes, 1),
table = lead(tab, 1))
ind2 |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, ""),
instruction = if_else(is.na(codes), "see", "see:code")) |>
print(n = 300)
usesee2 <- ind2 |>
filter(!is.na(see)) |>
select(letter, term, value = see, row, table) |>
unite("codes", row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, ""),
instruction = if_else(is.na(codes), "see", "see:code"))
left_join(use_see, usesee2)
use_see <- left_join(use_see, usesee2)
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
print(n = 200)
ind2 |>
filter(is.na(see))
ind2 |>
filter(is.na(see)) |>
print(n = 200)
ind2 |>
filter(is.na(see)) |>
select(-see) |>
print(n = 200)
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup()
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(levels = str_remove_all(levels, "term")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
group_by(lvlid) |>
pivot_wider(names_from = elem,
values_from = value) |>
ungroup() |>
mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
ind |>
filter(is.na(term_level)) |>
select(-term_level)
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see"))
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
# group_by(lvlid) |>
# pivot_wider(names_from = elem,
#             values_from = value) |>
# ungroup() |>
# mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
count(elem)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table",
.default = "see")) |>
# group_by(lvlid) |>
# pivot_wider(names_from = elem,
#             values_from = value) |>
# ungroup() |>
# mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table",
.default = NA_character_)) |>
# group_by(lvlid) |>
# pivot_wider(names_from = elem,
#             values_from = value) |>
# ungroup() |>
# mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, instruction, codes) |>
# group_by(lvlid) |>
# pivot_wider(names_from = elem,
#             values_from = value) |>
# ungroup() |>
# mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
# group_by(lvlid) |>
# pivot_wider(names_from = elem,
#             values_from = value) |>
# ungroup() |>
# mutate(levels = str_remove_all(levels, "term ")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction)) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction),
codes = lead(codes)) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction),
codes = lead(codes)) |>
filter(elem %nin% c("codes", "code", "tab")) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction),
codes = lead(codes)) |>
filter(elem %nin% c("codes", "code", "tab")) |>
mutate(instruction = if_else(is.na(instruction), elem, instruction)) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction),
codes = lead(codes)) |>
filter(elem %nin% c("codes", "code", "tab")) |>
mutate(instruction = if_else(is.na(instruction), elem, instruction)) |>
select(-elem) |>
print(n = 200)
use_see
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE))
##----------------------------------------
usesee3 <- ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see")) |>
mutate(instruction = case_when(str_detect(levels, "codes") ~ "see:code",
str_detect(levels, "tab") ~ "see:table", .default = NA_character_),
codes = case_when(!is.na(instruction) ~ value), .default = NA_character_) |>
select(letter, term, value, elem, instruction, codes) |>
mutate(instruction = lead(instruction),
codes = lead(codes)) |>
filter(elem %nin% c("codes", "code", "tab")) |>
mutate(instruction = if_else(is.na(instruction), elem, instruction)) |>
select(-elem)
left_join(use_see, usesee3)
use_see
usesee3
bind_rows(use_see, usesee3)
bind_rows(use_see, usesee3) |> arrange(letter, term) |> print(n = 200)
use_see <- bind_rows(use_see, usesee3) |> arrange(letter, term)
##----------------------------------------
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE)) |>
print(n = 200)
##----------------------------------------
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE)) |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE), elem == "use") |>
print(n = 200)
use_see
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem != "use") |>
print(n = 200)
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem == "use") |>
print(n = 200)
use_see
use_see
##----------------------------------------
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem == "use") |>
select(letter, term, instruction = elem, value, codes) |>
print(n = 200)
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem == "use")
ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem == "use") |>
select(letter, term, instruction = elem, value) |>
print(n = 200)
##----------------------------------------
use <- ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem == "use") |>
select(letter, term, instruction = elem, value) |>
print(n = 200)
bind_rows(use_see, use) |> arrange(letter, term)
use_see <- bind_rows(use_see, use) |> arrange(letter, term)
##----------------------------------------
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
print(n = 200)
##----------------------------------------
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
unite("codes", code, row, table, sep = "", na.rm = TRUE) |>
print(n = 200)
##----------------------------------------
ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
unite("codes", code, row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, "")) |>
print(n = 200)
board <- pins::board_folder(here::here("pkgdown/assets/pins-board"))
##----------------------------------------
ind2 <- ind2 |>
filter(is.na(see)) |>
select(-see, -codes, -tab) |>
unite("codes", code, row, table, sep = "", na.rm = TRUE) |>
mutate(codes = na_if(codes, ""))
ind3 <- ind |>
filter(is.na(term_level)) |>
select(-term_level) |>
filter(str_detect(levels, "term see", negate = TRUE),
elem != "use")
board |> pins::pin_write(use_see,
name = "newindex_usesee",
description = "ICD-10-PCS 2024 Index NEW pt1",
type = "qs")
board |> pins::pin_write(ind2,
name = "newindex_ind2",
description = "ICD-10-PCS 2024 Index NEW pt2",
type = "qs")
board |> pins::pin_write(ind3,
name = "newindex_ind2",
description = "ICD-10-PCS 2024 Index NEW pt3",
type = "qs")
board |> pins::pin_write(ind2,
name = "newindex_ind2",
description = "ICD-10-PCS 2024 Index NEW pt2",
type = "qs")
board |> pins::pin_write(ind3,
name = "newindex_ind3",
description = "ICD-10-PCS 2024 Index NEW pt3",
type = "qs")
board |> pins::write_board_manifest()
devtools::load_all(".")
order("02103D4")
tibble(
Position = c("Label", "Code", "Meaning"),
`1` = c("Section", "0", "Medical and Surgical"),
`2` = c("Body System", "0", "Central Nervous System and Cranial Nerves"),
`3` = c("Operation", "1", "Bypass"),
`4` = c("Body Part", "6", "Cerebral Ventricle"),
`5` = c("Approach", "0", "Open"),
`6` = c("Device", "7", "Autologous Tissue Substitute"),
`7` = c("Qualifier", "0", "Nasopharynx")) |>
gt() |>
tab_spanner(label = "Table", columns = c(`1`, `2`, `3`)) |>
tab_spanner(label = "Row", columns = c(`1`, `2`, `3`, `4`)) |>
tab_spanner(label = "Code", columns = c(`1`, `2`, `3`, `4`, `5`, `6`, `7`)) |>
cols_align(align = 'center') |>
opt_table_font(font = google_font(name = "Rubik")) |>
#opt_table_outline() |>
opt_table_lines(extent = "all") |>
tab_options(
column_labels.vlines.style = "solid",
column_labels.vlines.width = px(3),
#column_labels.font.weight = "bold",
heading.align = "left"
) |>
tab_header(title = md("**ICD-10-PCS** Code Structure"))
rows("041L")$axes
definitions()
definitions() |>
summarise(n = n(),
.by = c(code, section, axis, axis_name)) |>
arrange(axis)
definitions()
definitions() |>
summarise(n = n(),
.by = c(section, axis, name)) |>
arrange(axis)
definitions(section = "F", axis = "5")
definitions(section = "F", axis = "5") |>
select(-axis)
definitions(section = '0',
axis = '3',
text = "Bypass") |>
glimpse()
includes(section = '0', axis = '3', text = 'Bypass')
includes(section = '0', axis = '6', text = '^Autologous Tissue Substitute')
devices()
index() |>
dplyr::filter(code == "^0HB")
index()
index(search = "^0HB", column = "code")
pcs("0HB2XZZ")
library(procedural)
install.packages(c("fracdiff", "reticulate", "rsconnect", "strex", "tinytable"))
