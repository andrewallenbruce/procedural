tbls <- collapse::funique(vec)
vctrs::vec_size(tbls)
northstar::construct_regex2(tbls)
devtools::load_all(".")
get_pin("index_v1")
get_pin("index_v2")
get_pin("newindex_ind2")
get_pin("newindex_ind3")
get_pin("newindex_usesee")
pak::pak("andrewallenbruce/fuimus")
sections(0:9)
devtools::load_all(".")
sections(0:9)
sections(0:9)[c('value', 'label')] |>
gt(rowname_col = "value") |>
opt_table_font(font = google_font(name = "Rubik")) |>
opt_all_caps() |>
tab_header(title = md("**Medical and Surgical-Related Sections**")) |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
column_labels.hidden = TRUE)
library(procedural)
library(fuimus)
library(dplyr)
library(gt)
library(htmltools)
tibble(
Axis = 1:7,
Name = c(
'Section',
'Body System',
'Root Operation',
'Body Part',
'Approach',
'Device',
'Qualifier'
)
) |>
gt() |>
tab_style(
style = list(
cell_fill(color = "lightgray",
alpha = 0.5),
cell_text(weight = "bold")),
locations = cells_body(columns = Axis)) |>
cols_align(align = 'center',
columns = Axis) |>
opt_table_font(font = google_font(name = "Rubik")) |>
opt_all_caps() |>
opt_table_outline(style = "none") |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
footnotes.marks = letters
)
x <- pcs("02103D4")
x$axes |>
gt(rowname_col = "axis") |>
cols_align(align = "center", columns = c(axis, value)) |>
tab_style(style = list(cell_fill(color = "lightgray",
alpha = 0.5),
cell_text(weight = "bold")),
locations = cells_body(columns = value)) |>
tab_header(subtitle = html("<b><i>ICD-10-PCS 2024</i></b>"),
title = html(paste0("<b><u>",
x$procedure$code, "</u></b> ",
x$procedure$description))) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[1])),
locations = cells_body(columns = label, rows = 3)) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[2])),
locations = cells_body(columns = label, rows = 5)) |>
opt_table_font(font = google_font(name = "Rubik")) |>
opt_all_caps() |>
opt_table_outline(style = "none") |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
footnotes.marks = letters,
column_labels.hidden = TRUE)
x$axes |>
gt::gt(rowname_col = "axis") |>
gt::cols_align(
align = "center",
columns = c(axis, value)
) |>
gt::tab_style(style = list(
gt::cell_fill(
color = "lightgray",
alpha = 0.5),
gt::cell_text(weight = "bold")),
locations = gt::cells_body(columns = value)
) |>
gt::tab_header(
subtitle = htmltools::html("<b><i>ICD-10-PCS 2024</i></b>"),
title = htmltools::html(
paste0("<b><u>",
x$procedure$code,
"</u></b> ",
x$procedure$description)
)
) |>
gt::tab_footnote(
footnote = htmltools::html(
paste0(
"<b>Definition:</b> ",
x$definitions$definition[1])
),
locations = gt::cells_body(
columns = label,
rows = 3)
) |>
gt::tab_footnote(
footnote = htmltools::html(
paste0("<b>Definition:</b> ",
x$definitions$definition[2])
),
locations = gt::cells_body(
columns = label,
rows = 5)
) |>
gt::opt_table_font(
font = gt::google_font(name = "Rubik")
) |>
gt::opt_all_caps() |>
gt::opt_table_outline(style = "none") |>
gt::tab_options(
quarto.disable_processing = TRUE,
table.width = gt::pct(75),
heading.title.font.size = gt::px(18),
heading.subtitle.font.size = gt::px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = gt::px(12),
footnotes.marks = letters,
column_labels.hidden = TRUE)
gt_pcs <- function(pcs_object) {
pcs_object
}
pcs("02103D4") |>
gt_pcs()
gt_pcs <- function(x) {
x$axes |>
gt::gt(rowname_col = "axis")
}
pcs("02103D4") |>
gt_pcs()
gt_pcs <- function(x) {
x$axes |>
gt::gt(rowname_col = "axis") |>
gt::cols_align(
align = "center",
columns = c(axis, value)
) |>
gt::tab_style(style = list(
gt::cell_fill(
color = "lightgray",
alpha = 0.5),
gt::cell_text(weight = "bold")),
locations = gt::cells_body(columns = value)
) |>
gt::tab_header(
subtitle = htmltools::html("<b><i>ICD-10-PCS 2024</i></b>"),
title = htmltools::html(
paste0("<b><u>",
x$procedure$code,
"</u></b> ",
x$procedure$description)
)
) |>
gt::tab_footnote(
footnote = htmltools::html(
paste0(
"<b>Definition:</b> ",
x$definitions$definition[1])
),
locations = gt::cells_body(
columns = label,
rows = 3)
) |>
gt::tab_footnote(
footnote = htmltools::html(
paste0("<b>Definition:</b> ",
x$definitions$definition[2])
),
locations = gt::cells_body(
columns = label,
rows = 5)
) |>
gt::opt_table_font(
font = gt::google_font(name = "Rubik")
) |>
gt::opt_all_caps() |>
gt::opt_table_outline(style = "none") |>
gt::tab_options(
quarto.disable_processing = TRUE,
table.width = gt::pct(75),
heading.title.font.size = gt::px(18),
heading.subtitle.font.size = gt::px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = gt::px(12),
footnotes.marks = letters,
column_labels.hidden = TRUE)
}
pcs("02103D4") |>
gt_pcs()
gt_pcs <- function(x) {
x$axes |>
gt::gt(rowname_col = "axis") |>
gt::cols_align(
align = "center",
columns = c(axis, value)
) |>
gt::tab_style(style = list(
gt::cell_fill(
color = "lightgray",
alpha = 0.5),
gt::cell_text(weight = "bold")),
locations = gt::cells_body(columns = value)
) |>
gt::tab_header(
subtitle = gt::html("<b><i>ICD-10-PCS 2024</i></b>"),
title = gt::html(
paste0("<b><u>",
x$procedure$code,
"</u></b> ",
x$procedure$description)
)
) |>
gt::tab_footnote(
footnote = gt::html(
paste0(
"<b>Definition:</b> ",
x$definitions$definition[1])
),
locations = gt::cells_body(
columns = label,
rows = 3)
) |>
gt::tab_footnote(
footnote = gt::html(
paste0("<b>Definition:</b> ",
x$definitions$definition[2])
),
locations = gt::cells_body(
columns = label,
rows = 5)
) |>
gt::opt_table_font(
font = gt::google_font(name = "Rubik")
) |>
gt::opt_all_caps() |>
gt::opt_table_outline(style = "none") |>
gt::tab_options(
quarto.disable_processing = TRUE,
table.width = gt::pct(75),
heading.title.font.size = gt::px(18),
heading.subtitle.font.size = gt::px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = gt::px(12),
footnotes.marks = letters,
column_labels.hidden = TRUE)
}
pcs("02103D4") |>
gt_pcs()
sections(0:9)[c('value', 'label')] |>
gt(rowname_col = "value") |>
opt_table_font(font = google_font(name = "Rubik")) |>
opt_all_caps() |>
tab_header(title = md("**Medical and Surgical-Related Sections**")) |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
column_labels.hidden = TRUE)
tables() |>
group_by(section) |>
summarise(codes = sum(n_codes),
prop = codes / 78220) |>
rename(code = section) |>
left_join(sections()[c('code', 'label')],
by = join_by(code)) |>
select(code, label, codes, prop) |>
mutate(id = row_number(), .before = 1) |>
gt(rowname_col = "id") |>
fmt_percent(columns = prop, decimals = 1) |>
fmt_number(columns = codes, decimals = 0) |>
opt_table_font(font = google_font(name = "Rubik")) |>
cols_align(align = "center", columns = code) |>
cols_hide(c(codes, prop)) |>
tab_style(style = list(cell_fill(color = "lightgray",
alpha = 0.5),
cell_text(weight = "bold")),
locations = cells_body(columns = code)) |>
opt_all_caps() |>
opt_align_table_header(align = "left") |>
tab_header(title = md("**ICD-10-PCS 2024** Sections")) |>
cols_nanoplot(columns = codes,
plot_type = "bar",
new_col_label = "# of Codes",
options = nanoplot_options(
data_bar_fill_color = "#0B0B45",
data_bar_stroke_color = "#0B0B45",
interactive_data_values = FALSE)) |>
tab_style(style = cell_borders(sides = c("left"),
weight = "5px",
color = "lightgray"),
locations = cells_body(columns = nanoplots))
tables("001")
get_pin("tables_rows")
devtools::load_all(".")
get_pin("tables_rows")
get_pin("tables_rows")
get_pin("tables_rows") |>
group_by(code_1)
gt_pcs2 <- function(x) {
x$axes |>
gt::gt(rowname_col = "axis") |>
gt::opt_table_font(
font = gt::google_font(name = "Rubik")
) |>
gt::cols_align(
align = "center",
columns = c(axis, value)
) |>
gt::tab_style(
style = list(
gt::cell_fill(
color = "lightgray",
alpha = 0.5),
gt::cell_text(weight = "bold")
),
locations = gt::cells_body(columns = value)
) |>
gt::opt_all_caps() |>
gt::opt_table_outline(style = "none") |>
gt::tab_header(
title = gt::html(
paste0(
"<b>",
x$code,
"</b>  ",
x$description)
),
subtitle = htmltools::tagList(
htmltools::tags$div(
style = htmltools::css(
`text-align` = "right"),
htmltools::tags$div(
htmltools::tags$strong("ICD-10-PCS 2024")
)
)
)
) |>
gt::tab_options(
quarto.disable_processing = TRUE,
stub.background.color = "#0B0B35",
stub.border.color = "white",
stub_row_group.border.color = "#0B0B35",
table.width = gt::pct(75),
heading.title.font.size = gt::px(16),
heading.subtitle.font.size = gt::px(14),
heading.background.color = "white",
heading.border.bottom.color = "#0B0B35",
heading.align = "left",
table.font.color = "#0B0B35",
table.font.size = gt::px(14),
table.border.bottom.color = "#0B0B35",
footnotes.font.size = gt::px(12),
column_labels.hidden = TRUE)
}
pcs("02103D4") |>
gt_pcs2()
x <- pcs("0LB50ZX")
x$axes |>
gt(rowname_col = "axis") |>
opt_table_font(font = google_font(name = "Rubik")) |>
cols_align(align = "center", columns = c(axis, value)) |>
tab_style(style = list(cell_fill(color = "lightgray",
alpha = 0.5),
cell_text(weight = "bold")),
locations = cells_body(columns = value)) |>
opt_all_caps() |>
opt_table_outline(style = "none") |>
tab_header(subtitle = html("<b><i>ICD-10-PCS 2024</i></b>"),
title = html(paste0("<b><u>",
x$procedure$code, "</u></b> ",
x$procedure$description))) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[1])),
locations = cells_body(columns = label, rows = 3)) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[2])),
locations = cells_body(columns = label, rows = 5)) |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
column_labels.hidden = TRUE)
x <- pcs("0LB50ZX")
x$axes |>
gt(rowname_col = "axis") |>
opt_table_font(font = google_font(name = "Rubik")) |>
cols_align(align = "center", columns = c(axis, value)) |>
tab_style(style = list(cell_fill(color = "lightgray",
alpha = 0.5),
cell_text(weight = "bold")),
locations = cells_body(columns = value)) |>
opt_all_caps() |>
opt_table_outline(style = "none") |>
tab_header(subtitle = html("<b><i>ICD-10-PCS 2024</i></b>"),
title = html(paste0("<b><u>",
x$code, "</u></b> ",
x$description))) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[1])),
locations = cells_body(columns = label, rows = 3)) |>
tab_footnote(
footnote = html(paste0("<b>Definition:</b> ",
x$definitions$definition[2])),
locations = cells_body(columns = label, rows = 5)) |>
tab_options(
table.width = pct(75),
heading.title.font.size = px(18),
heading.subtitle.font.size = px(14),
heading.align = "left",
table.font.color = "#0B0B45",
footnotes.font.size = px(12),
column_labels.hidden = TRUE)
use_r("gt_print")
use_r("print")
devtools::load_all(".")
gc()
try(pcs("0G9") |> gt_pcs2())
pcs("0G9000Z") |> gt_pcs2()
pcs("0LQV3ZZ") # Medical and Surgical
pcs("0G9000Z") # Medical and Surgical
pcs("10D20ZZ") # Obstetrics
pcs("2W0UX0Z") # Placement
pcs("3E1938X") # Administration
pcs("4B01XVZ") # Measurement and Monitoring
pcs("5A02110") # Extracorporeal or Systemic Assistance and Performance
pcs("6A0Z0ZZ") # Extracorporeal or Systemic Therapies
pcs("7W00X0Z") # Osteopathic
pcs("8C01X6J") # Other Procedures
pcs("9WB0XBZ") # Chiropractic
pcs("B00B0ZZ") # Imaging
pcs("C0101ZZ") # Nuclear Medicine
pcs("DG22DZZ") # Radiation Therapy
pcs("F14Z01Z") # Physical Rehabilitation and Diagnostic Audiology
pcs("GZ10ZZZ") # Mental Health
pcs("HZ96ZZZ") # Substance Abuse Treatment
pcs("XY0YX37") # New Technology
pcs("XY0YX37")
d <- pcs("XY0YX37")
d$axes
d$axes$axis <- as.integer(d$axes$axis)
d
usethis::use_tidy_description()
devtools::build_rmd("README.Rmd")
usethis::edit_git_ignore()
install.packages("clock")
devtools::load_all(".")
library(procedural)
library(fuimus)
library(dplyr)
library(gt)
library(htmltools)
pcs("02103D4") |>
gt_print2()
pcs("02103D4") |>
gt_pcs2()
pcs("02103D4") |>
gt_pcs()
pcs("0LB50ZX") |>
gt_pcs()
pcs("5A02210") |>
gt_pcs2()
pcs("B02000Z") |>
gt_pcs()
pcs("0016070") |>
gt_pcs()
pcs("0016070")
devtools::load_all(".")
gt_pcs(pcs("0016070"))
